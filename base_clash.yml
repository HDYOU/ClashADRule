mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
dns:
  enable: true
  ipv6: false
  default-nameserver: [ 223.5.5.5, 119.29.29.29 ]
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  nameserver: [ 'https://853.66a.net:443/dns-query', 'https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query' ]
  # å½“é…ç½® fallback æ—¶ï¼Œä¼šæŸ¥è¯¢ nameserver ä¸­è¿”å›çš„ IP æ˜¯å¦ä¸º CNï¼Œéå¿…è¦é…ç½®
  # å½“ä¸æ˜¯ CNï¼Œåˆ™ä½¿ç”¨ fallback ä¸­çš„ DNS æŸ¥è¯¢ç»“æœ
  # ç¡®ä¿é…ç½® fallback æ—¶èƒ½å¤Ÿæ­£å¸¸æŸ¥è¯¢
  fallback: [ 'https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', 'tls://8.8.4.4:853' ]
  # é…ç½® fallback ä½¿ç”¨æ¡ä»¶
  fallback-filter:
    geoip: true # é…ç½®æ˜¯å¦ä½¿ç”¨ geoip
    geoip-code: CN # å½“ nameserver åŸŸåçš„ IP æŸ¥è¯¢ geoip åº“ä¸º CN æ—¶ï¼Œä¸ä½¿ç”¨ fallback ä¸­çš„ DNS æŸ¥è¯¢ç»“æœ
  
  #   é…ç½®å¼ºåˆ¶ fallbackï¼Œä¼˜å…ˆäº IP åˆ¤æ–­ï¼Œå…·ä½“åˆ†ç±»è‡ªè¡ŒæŸ¥çœ‹ geosite åº“
    geosite:
     - gfw
  #   å¦‚æœä¸åŒ¹é… ipcidr åˆ™ä½¿ç”¨ nameservers ä¸­çš„ç»“æœ
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

  # é…ç½®æŸ¥è¯¢åŸŸåä½¿ç”¨çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    #   'www.baidu.com': '114.114.114.114'
    #   '+.internal.crop.com': '10.0.0.1'
    "geosite:cn,private,apple":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "www.baidu.com,+.google.cn": [223.5.5.5, https://dns.alidns.com/dns-query]
    ## globalï¼Œdns ä¸º rule-providers ä¸­çš„åä¸º global å’Œ dns è§„åˆ™è®¢é˜…ï¼Œ
    ## ä¸” behavior å¿…é¡»ä¸º domain/classicalï¼Œå½“ä¸º classical æ—¶ä»…ä¼šç”Ÿæ•ˆåŸŸåç±»è§„åˆ™
    # "rule-set:global,dns": 8.8.8.8
    "rule-set:è‡ªå®šä¹‰å¹¿å‘Šç™½åå•": [223.5.5.5, https://dns.alidns.com/dns-query]
    "rule-set:adblock,è‡ªå®šä¹‰å¹¿å‘Šæ‹¦æˆª": rcode://success
    

  # é…ç½®ä¸ä½¿ç”¨fake-ipçš„åŸŸå
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com

rules:
# traffic match external rules defined in 'https://ruleset.com/cn' will be sent to 'ProxyVMess'
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list,ğŸ¯ å…¨çƒç›´è¿
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,ğŸ¯ å…¨çƒç›´è¿
RULE-SET,https://raw.gitmirror.com/HDYOU/ClashADRule/main/sugg_whitelist.txt,ğŸ¯ å…¨çƒç›´è¿

# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list,ğŸ›‘ å…¨çƒæ‹¦æˆª
# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list,ğŸ›‘ å…¨çƒæ‹¦æˆª
# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyList.list,ğŸ›‘ AdBlock
# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list,ğŸ›‘ AdBlock
# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list,ğŸ›‘ AdBlock
# RULE-SET,https://raw.gitmirror.com/privacy-protection-tools/anti-AD/master/anti-ad-surge.txt,ğŸ›‘ AdBlock
# RULE-SET,https://raw.gitmirror.com/HDYOU/ClashADRule/anti-ad-surge.list,ğŸ›‘ å…¨çƒæ‹¦æˆª

RULE-SET,https://raw.gitmirror.com/HDYOU/ClashADRule/main/sugg_ad_2.txt,ğŸ›‘ å…¨çƒæ‹¦æˆª
RULE-SET,https://raw.gitmirror.com/privacy-protection-tools/anti-AD/master/anti-ad-surge.txt,ğŸ›‘ å…¨çƒæ‹¦æˆª

RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list,ğŸŒ å›½å¤–åŠ é€Ÿ
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list,ğŸ¯ å…¨çƒç›´è¿
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list,ğŸ¯ å…¨çƒç›´è¿
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list,â“‚ï¸ å¾®è½¯æœåŠ¡

# RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list,ğŸ è‹¹æœæœåŠ¡

RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list,ğŸ“² ç”µæŠ¥ä¿¡æ¯
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list,ğŸŒ å›½å¤–åŠ é€Ÿ
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/ProxyLite.list,ğŸŒ å›½å¤–åŠ é€Ÿ
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list,ğŸ¯ å…¨çƒç›´è¿
RULE-SET,https://raw.gitmirror.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,ğŸ¯ å…¨çƒç›´è¿

GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
